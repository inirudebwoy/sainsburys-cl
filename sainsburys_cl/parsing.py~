import re

from bs4 import BeautifulSoup


def _parse(html):
    return BeautifulSoup(html, 'html.parser')


def _find(html, *args, **kwargs):
    try:
        return html.find_all(**kwargs)
    except TypeError:
        return None


def _get_price(html):
    price_reg = re.compile('[0-9]*\.?[0-9]+')
    price_tag = html.find(class_='pricePerUnit').get_text()
    match = price_reg.search(price_tag)
    try:
        return float(match.group()) or 0
    except AttributeError:
        logger.exception('Could not find price in {price}'.format(price_tag))
        return 0


def _get_descr(html):
    return html.select_one('div.productText > p').get_text()


def _get_title(html):
    return html.select_one('.productTitleDescriptionContainer > h1').get_text()
